function init(){for(nums[0]=numeroRandom(),m=1;cant-1>=m;m++)nums[m]=comprueba(numeroRandom());largo=nums.length;for(var n=0;n<largo;n++)nums[largo+n]=nums[n];for(var a=0;a<nums.length;a++)if(a==nums.length-1){for(var e=0;e<nums.length;e++)if(null!=nums[e]){lista[a]=nums[e];break}}else numerin=Math.floor(Math.random()*nums.length-1),numerin=comprueba2(numerin),lista[a]=nums[numero],nums[numero]=null;for(var i=0;i<lista.length;i++)imagenes[i]=new Image,imagencilla=instaimage[lista[i]],imagenes[i].src=imagencilla;s=1,generaTabla(),$("#table-cards:first-child tr:first-child td:first-child img").addClass("selected"),$("#points span").html("0"),$("#oportunities span").html(perder)}function reinicializa(){nums=[],cant=6,acrtos=0,intentos=0,puntos=0,gana=!1,perdio=!1,numero=0,lista=[],imagenes=[],cont=0,ubicacion=1}function generaTabla(){var n='<table id="table-cards" width="100" align="center">';for(n+='<tr align="center">',p=1;p<=nums.length;p++)s>4&&(n+="</tr><tr>",s=1),n+='<td id="'+lista[p-1]+'"><a href="#" onclick="this.blur();return false">',n+='<img class="img-card elem'+p+'" id="'+lista[p-1]+'" src="images/card.png" width="150">',n+="</a></td>",s++;n+="</table>",$("#tablero").html(n)}function gira(n,a){1==perdio,n!=gi1&&cont++,cont<3&&(n.src=instaimage[a],1==cont?gi1=n:(gi2=n,comp()))}function comp(){gi1.src==gi2.src?(restaura_char("acierto"),setTimeout("restaura_char('thinking')",1500),gi1.onclick=null,gi2.onclick=null,$("#oportunities span").html(perder-intentos),acrtos++,puntos+=10,$("#points span").html(puntos),acrtos==cant&&(finJuego("gana"),restaura_char("gano"),gana=!0),cont=0):(reset_char(),asigna_char("fallo"),setTimeout("restaura_char('thinking')",1500),setTimeout("restaura()",1500))}function restaura(){gi1.src="images/card.png",gi1="",setTimeout('gi2.src = "images/card.png";gi2=""',200),cont=0,intentos++,$("#oportunities span").html(perder-intentos),intentos>=perder&&(cont=4,finJuego("pierde"),restaura_char("perdio"),perdio=!0)}function finJuego(n){"pierde"==n&&($("#estado").html("Your "+perder+'  chances were completed<br> You lose! <a id="again" href="#">Play again!</a>'),cont="perdio"),"gana"==n&&($("#estado").html('You won! Congrats!<br> <a id="again" href="#">Play again!</a>'),cont="gano")}function numeroRandom(){var n=Math.ceil(Math.random()*numImagenes);return n}function comprueba(n){for(var a=!1,e=0;e<nums.length;e++)if(n==nums[e]){a=!0;break}return 0==a?n:(m--,void comprueba(numeroRandom()))}function comprueba2(n){return null!=nums[n]?(numero=n,n):void(n==nums.length-1?(n=0,numerito2=n,comprueba2(numerito2)):(n+=1,numerito2=n,comprueba2(numerito2)))}function siguiente(){2*cant>ubicacion&&(ubicacion++,$("#table-cards tr td a img").removeClass("selected"),$(".elem"+ubicacion).addClass("selected"))}function anterior(){ubicacion>1&&(ubicacion--,$("#table-cards tr td a img").removeClass("selected"),$(".elem"+ubicacion).addClass("selected"))}function selecciona(){var n=$(".elem"+ubicacion)[0];gira(n,$(".elem"+ubicacion).attr("id"))}function reset_char(){$(".char").removeClass("thinking").removeClass("acierto").removeClass("fallo").removeClass("perdio").removeClass("gano")}function asigna_char(n){$(".char").addClass(n)}function restaura_char(n){reset_char(),asigna_char(n)}var numImagenes=8,perder=10,nums=[],cant=6,acrtos=0,intentos=0,puntos=0;gana=!1,perdio=!1;var numero=0,lista=[],imagenes=[];cont=0;var gi1,gi2,m,ubicacion=1;$(document).ready(function(){init(),$("#tablero").on("click",".img-card",function(){gira(this,$(this).attr("id"))}),$("#estado").on("click","#again",function(){return reinicializa(),init(),$("#estado").html(""),$("#points span").html("0"),$("#oportunities span").html(perder),!1}),Myo.connect(),Myo.on("status",function(n){}),Myo.on("pose",function(n){"wave_in"==n&&siguiente(),"wave_out"==n&&anterior(),"fingers_spread"==n&&selecciona()})});